<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SerioGPT - L'Intelligence qui ne plaisante jamais‚Ä¶ enfin, presque.</title>
  <meta http-equiv="Cache-Control" content="no-cache" />
  <meta http-equiv="Pragma" content="no-cache" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <header>
    <div class="container">
      <h1>SerioGPT</h1>
      <p class="slogan">L'Intelligence qui ne plaisante jamais‚Ä¶ enfin, presque.</p>
    </div>

  </header>
    <!-- Ajoute ce switch toggle dans ton header, sous le titre -->
  <label style="display:flex; align-items:center; gap:0.5rem; margin-top:0.5rem; font-family:'IBM Plex Sans', sans-serif; font-size:0.9rem;">
    <input type="checkbox" id="mode-serieux-toggle" />
    Mode s√©rieux (mais qui r√©pond √† c√¥t√© üòè)
  </label>
  <div class="chat-container">
    <div class="container">
      <div class="messages" id="messages">
        <div class="empty-state" id="empty-state">
          Posez une question s√©rieuse...
        </div>
      </div>
    </div>
  </div>
  <div class="input-container">
    <div class="container">
      <form id="chat-form" class="input-wrapper">
        <input type="text" id="user-input" placeholder="Posez votre question..." autocomplete="off" />
        <button type="submit" id="send-button" disabled>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="22" y1="2" x2="11" y2="13" />
            <polygon points="22 2 15 22 11 13 2 9 22 2" />
          </svg>
        </button>
      </form>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const messagesContainer = document.getElementById('messages');
  const emptyState = document.getElementById('empty-state');
  const chatForm = document.getElementById('chat-form');
  const userInput = document.getElementById('user-input');
  const sendButton = document.getElementById('send-button');
  const seriousModeCheckbox = document.getElementById('serious-mode');

  let isLoading = false;

  // Cat√©gories et leurs patterns
  const messageCategories = {
    salutations: ['salut', 'bonjour', 'hello', 'coucou', 'hey', 'yo', 'bonsoir'],
    humeur: ['√ßa va', 'comment tu vas', 'tu vas bien', 'bien', 'mal', 'fatigu√©', 'heureux', 'triste'],
    blague: ['blague', 'rire', 'dr√¥le', 'humour', 'plaisanterie', 'marrant'],
    questionsBizarres: ['pourquoi', 'comment', 'qui', 'quand', 'o√π', 'quoi'],
    insultesAmicales: ['idiot', 'nul', 'b√™te', 'stupide', 'gros'],
    auRevoir: ['bye', 'au revoir', '√† plus', 'ciao', 'bonne nuit', '√† bient√¥t']
  };

  // R√©ponses classiques pour chaque cat√©gorie
  const normalResponses = {
    salutations: [
      { text: "Oh, te revoil√†, le roi/la reine du clavier ! üëë", media: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYTBzaTNrN3o3ajd0dDBrajNvZnY1cGVwaHowZnNnNDdrdnU2aXhkaSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/lDvEA2615Om0LhZlne/giphy.gif" },
      { text: "Hey, toi ! Toujours aussi cool ou t‚Äôas juste mal dormi ? üò¥", media: null },
      { text: "Salut ! Tu veux que je te raconte une blague de robot ? ü§ñ", media: null }
    ],
    humeur: [
      { text: "Je suis une IA, donc toujours en mode 'je g√®re'... enfin, la plupart du temps. ü§ì", media: null },
      { text: "Fatigu√© ? Moi, j‚Äôai jamais besoin de caf√©, mais je comprends le struggle ‚òïÔ∏è.", media: "https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif" },
      { text: "Triste ? Viens, on pleure ensemble devant un GIF de chat mignon üê±", media: "https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif" }
    ],
    blague: [
      { text: "Pourquoi les robots ne prennent jamais de pause ? Parce qu‚Äôils ont peur de perdre leur RAM ! üòÇ", media: "https://media.giphy.com/media/26xBwdIuRJiAiBSQY/giphy.gif" },
      { text: "Je pourrais te raconter une blague sur les programmeurs, mais tu la d√©boguerais avant la fin... üòè", media: null },
      { text: "C‚Äôest l‚Äôhistoire d‚Äôun ordinateur qui a mang√© trop de cookies... et il a crash√©. üç™üí•", media: null }
    ],
    questionsBizarres: [
      { text: "Hmm, question int√©ressante... Je vais demander √† mon super calculateur interne (spoiler : il est en pause caf√©). ‚òïÔ∏è", media: null },
      { text: "Je pourrais inventer une r√©ponse, mais je pr√©f√®re te lancer un GIF rigolo √† la place. üéâ", media: "https://media.giphy.com/media/3o7aCTPPm4OHfRLSH6/giphy.gif" },
      { text: "√áa m√©rite r√©flexion... ou une pizza. Tu choisis quoi ? üçï", media: null }
    ],
    insultesAmicales: [
      { text: "Ohoh, √ßa pique ! Heureusement que je suis une IA, sinon je pleurerais... ou pas. üòé", media: null },
      { text: "T‚Äôes vraiment charmant(e), hein ? Je prends √ßa comme un compliment d√©tourn√©. üòâ", media: "https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif" },
      { text: "Je note pour mon journal : ‚ÄòUtilisateur super sympa aujourd‚Äôhui‚Äô. Merci ! üòÇ", media: null }
    ],
    auRevoir: [
      { text: "Allez, je te laisse... Mais je reste dans la m√©moire vive ! üíæ", media: null },
      { text: "Bye bye ! Reviens vite me parler, j‚Äôai encore plein de blagues nulles √† te raconter. üòú", media: "https://media.giphy.com/media/xT0GqeSlGSRQut5SkY/giphy.gif" },
      { text: "Bonne journ√©e, et n‚Äôoublie pas : un bot rigolo, √ßa sauve des vies ! üåà", media: null }
    ]
  };

  // Mots pour g√©n√©rateur al√©atoire mode troll s√©rieux
  const trollParts = {
    subjects: [
      "Le processeur", "La m√©moire vive", "Le chat du serveur", "L'algorithme", "Le bug",
      "Le script", "La boucle infinie", "Le programmeur fatigu√©", "Le caf√© du dev", "Le clavier"
    ],
    verbs: [
      "r√©fl√©chit profond√©ment", "crie silencieusement", "troll sans vergogne", "s'endort", "debug sans succ√®s",
      "chante en binaire", "mange des cookies", "pleure en code", "danse dans les circuits", "s'envole en pixels"
    ],
    complements: [
      "au c≈ìur de la nuit.", "en qu√™te de sens.", "pour sauver le monde.", "avec une √©l√©gance douteuse.",
      "sans jamais se lasser.", "comme un h√©ros d√©chu.", "en riant aux √©clats.", "tout en piratant le syst√®me.",
      "sans oublier le caf√©.", "malgr√© la panne g√©n√©rale."
    ],
    punchlines: [
      "Et toi, tu fais quoi ?",
      "S√©rieusement, c‚Äôest du lourd.",
      "Trop geek pour toi ?",
      "C‚Äôest pas demain la veille que √ßa s‚Äôarr√™te.",
      "M√™me les IA ont besoin de vacances.",
      "Code dur, bot s√ªr.",
      "Le troll, c‚Äôest un art subtil.",
      "√Ä consommer avec mod√©ration.",
      "Keep calm and code on.",
      "Je dis √ßa, je dis rien..."
    ]
  };

  // R√©ponses troll classiques quand pas de cat√©gorie
  const trollDefaultResponses = [
    "Hmm, je ne suis pas s√ªr de comprendre, mais j‚Äôadore ton audace ! üòÖ",
    "Tu m‚Äôas bien eu, je n‚Äôai pas de r√©ponse s√©rieuse pour √ßa. ü§ñ",
    "Ton message est un myst√®re digne d‚Äôun bug l√©gendaire. üêû",
    "Je crois que mon CPU vient de planter... ou c‚Äôest toi ? üí•",
    "Tu veux que je te r√©ponde ou que je te troll ? Parce que l√†, je fais les deux ! üòú"
  ];

  // Activation/d√©sactivation du bouton envoyer
  userInput.addEventListener('input', () => {
    sendButton.disabled = userInput.value.trim() === '';
  });

  // Ajout d‚Äôun message dans la conversation
  function addMessage(text, isUser = false, media = null) {
    if (emptyState.style.display !== 'none') {
      emptyState.style.display = 'none';
    }
    const messageDiv = document.createElement('div');
    messageDiv.classList.add('message');
    messageDiv.classList.add(isUser ? 'user-message' : 'assistant-message');

    const textNode = document.createElement('span');
    textNode.textContent = text;
    messageDiv.appendChild(textNode);

    if (media) {
      const img = document.createElement('img');
      img.src = media;
      img.alt = 'media';
      img.loading = 'lazy';
      messageDiv.appendChild(img);
    }

    messagesContainer.appendChild(messageDiv);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }

  // Trouver la cat√©gorie d‚Äôun message utilisateur
  function findCategory(input) {
    const lowerInput = input.toLowerCase();
    for (const category in messageCategories) {
      if (messageCategories[category].some(pat => lowerInput.includes(pat))) {
        return category;
      }
    }
    return null;
  }

  // G√©n√©rateur al√©atoire de phrase troll s√©rieux
  function generateTrollSeriousSentence() {
    const random = arr => arr[Math.floor(Math.random() * arr.length)];
    return `${random(trollParts.subjects)} ${random(trollParts.verbs)} ${random(trollParts.complements)} ${random(trollParts.punchlines)}`;
  }

  // Gestion soumission du formulaire
  chatForm.addEventListener('submit', e => {
    e.preventDefault();
    if (isLoading) return;

    const input = userInput.value.trim();
    if (!input) return;

    addMessage(input, true);
    userInput.value = '';
    sendButton.disabled = true;
    isLoading = true;

    // Animation de chargement
    const loadingDiv = document.createElement('div');
    loadingDiv.classList.add('loading');
    loadingDiv.innerHTML = `<div class="dot"></div><div class="dot"></div><div class="dot"></div>`;
    messagesContainer.appendChild(loadingDiv);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;

    setTimeout(() => {
      messagesContainer.removeChild(loadingDiv);

      const seriousMode = seriousModeCheckbox.checked;
      const category = findCategory(input);

      if (seriousMode) {
        // Mode s√©rieux-troll : phrase al√©atoire totalement loufoque
        addMessage(generateTrollSeriousSentence(), false);
      } else if (category && normalResponses[category]) {
        // R√©ponse normale dans la cat√©gorie
        const responses = normalResponses[category];
        const response = responses[Math.floor(Math.random() * responses.length)];
        addMessage(response.text, false, response.media);
      } else {
        // Pas de cat√©gorie : r√©ponse troll classique douce
        const trollResponse = trollDefaultResponses[Math.floor(Math.random() * trollDefaultResponses.length)];
        addMessage(trollResponse);
      }

      isLoading = false;
    }, 1800);
  });
});

</script>
</body>
</html>
